const SitesJS={requestAPI:(a,o,c)=>{let i=5;!function s(){return new Promise((t,e)=>{let r=0,n=setTimeout(()=>{0===r&&(r=2,n=null,e("请求超时"),0==i&&c())},5e3);fetch(a).then(function(e){if(2!==r&&(clearTimeout(n),t(e),n=null,r=1),e.ok)return e.json();throw new Error("Network response was not ok.")}).then(function(e){i=0,o(e)}).catch(function(e){0<i?(--i,setTimeout(()=>{s()},5e3)):c()})})}()},layout:s=>{const r=s.el;SitesJS.requestAPI(s.api,function(e){r.querySelector(".loading-wrap").remove();const t=e.content;var n="";t.forEach((e,t)=>{var r='<div class="site-card">';r+='<a class="card-link" target="_blank" rel="external noopener noreferrer" href="'+e.url+'">',r+='<img alt="'+e.title+'" src="'+(e.screenshot||"https://image.thum.io/get/width/1024/crop/768/"+e.url)+'" onerror="javascript:this.onerror=null;this.src=\''+s.screenshot+"';\"/>",r+='<div class="info">',r+='<img alt="'+e.title+'" src="'+(e.avatar||s.avatar)+'" onerror="javascript:this.onerror=null;this.src=\''+s.avatar+"';\"/>",r+='<span class="title">'+e.title+"</span>",r+='<span class="desc">'+(e.description||e.url)+"</span>",r+="</div>",r+="</a>",n+=r+="</div>"}),r.querySelector(".group-body").innerHTML=n},function(){try{r.querySelector(".loading-wrap svg").remove(),r.querySelector(".loading-wrap p").innerText("加载失败，请稍后重试。")}catch(e){}})},start:e=>{for(var t=document.getElementsByClassName("sitesjs-wrap"),r=0;r<t.length;r++){const s=t[r];var n=s.getAttribute("api");null!=n&&((e=new Object).class=s.getAttribute("class"),e.el=s,e.api=n,e.avatar="https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.1/link/8f277b4ee0ecd.svg",e.screenshot="https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.1/cover/76b86c0226ffd.svg",SitesJS.layout(e))}}};SitesJS.start(),document.addEventListener("pjax:complete",function(){SitesJS.start()});